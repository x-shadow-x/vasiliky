function initEventClick(){function t(){controllArm.style.transform="rotate(-130deg)",$cdCover.removeClass("cdPause"),$cdCover.removeClass("cdStart"),myAudio.load()}$playBtn.click(function(){iIncrement=iStartDeg-iEndDeg,controllArm.style.transform="rotate("+iStartDeg+"deg)",$cdCover.hasClass("cdPause")&&($cdCover.removeClass("cdPause"),$cdCover.removeClass("cdStart")),$cdCover.hasClass("cdStart")||$cdCover.addClass("cdStart"),myAudio.play()}),$pauseBtn.click(function(){controllArm.style.transform="rotate(-130deg)",$cdCover.hasClass("cdPause")||$cdCover.addClass("cdPause"),myAudio.pause()}),$nextBtn.click(function(){changeSong("next")}),$preBtn.click(function(){changeSong("pre")}),$stopBtn.click(t),$muteBtn.click(function(){myAudio.muted=!myAudio.muted,myAudio.muted?$(this).css({color:"red"}):$(this).css({color:"#b1b9c6"})}),$firstBtn.click(function(){changeSong("first")}),$lastBtn.click(function(){changeSong("last")}),$shuffleMode.click(function(){playMode="shuffle",$("#playMode").find("div").css({color:"#b1b9c6"}),$(this).css({color:"#e74d3c"})}),$listMode.click(function(){playMode="list",$("#playMode").find("div").css({color:"#b1b9c6"}),$(this).css({color:"#e74d3c"})}),$loopMode.click(function(){playMode="loop",$("#playMode").find("div").css({color:"#b1b9c6"}),$(this).css({color:"#e74d3c"})}),$muteBtn.hover(function(){myAudio.muted||$(this).css({color:"#ffffff"})},function(){$(this).css({color:"#b1b9c6"}),myAudio.muted&&$(this).css({color:"red"})})}function initComponents(){$playBtn=$("#playBtn"),$pauseBtn=$("#pauseBtn"),$nextBtn=$("#nextBtn"),$preBtn=$("#preBtn"),$stopBtn=$("#stopBtn"),$muteBtn=$("#muteBtn"),$firstBtn=$("#firstBtn"),$lastBtn=$("#lastBtn"),$shuffleMode=$("#shuffleMode"),$listMode=$("#listMode"),$loopMode=$("#loopMode"),myAudio=$("#myAudio")[0],controllArm=$("#cdControllerArm")[0],$cdCover=$("#cdCover"),iStartDeg=-90,iEndDeg=-115,iIncrement=25,songsListIndex=0,playMode="list",$("#listMode").css({color:"#e74d3c"}),shuffleIndex=[],shuffleIndexCount=songsList.length-1,initShuffleGenerator()}function initShuffleGenerator(){for(var t=0;t<songsList.length;t++)shuffleIndex[t]=t}function init(){initComponents(),initEventClick()}function shuffle(){var t=getRandom(shuffleIndexCount),s=shuffleIndex[t];return shuffleIndex[t]=shuffleIndex[shuffleIndexCount],shuffleIndexCount--,0>shuffleIndexCount&&(shuffleIndexCount=songsList.length),s}function changeSong(t){0!=myAudio.currentTime&&(myAudio.paused||($cdCover.hasClass("cdPause")&&($cdCover.removeClass("cdPause"),$cdCover.removeClass("cdStart")),$cdCover.hasClass("cdStart")||$cdCover.addClass("cdStart"),controllArm.style.transform="rotate(-130deg)","pre"==t?(songsListIndex--,-1>=songsListIndex&&(songsListIndex=songsList.length)):"next"==t?(songsListIndex++,songsListIndex>=songsList.length+1&&(songsListIndex=0)):"first"==t?songsListIndex=0:"last"==t&&(songsListIndex=songsList.length-1),myAudio.src=decodeURI(songsList[songsListIndex].musicURL),myAudio.load(),myAudio.play()))}function getRandom(t){return Math.floor(Math.random()*t+1)}var $playBtn,$pauseBtn,$nextBtn,$preBtn,$stopBtn,$muteBtn,$firstBtn,$lastBtn,$shuffleMode,$listMode,$loopMode,myAudio,controllArm,$cdCover,iStartDeg,iEndDeg,iIncrement,songsListIndex,playMode,shuffleIndex,shuffleIndexCount;$().ready(function(){init();for(var t=0;t<songsList.length;t++)songsList[t].musicURL=encodeURI(songsList[t].musicURL);myAudio.src=decodeURI(songsList[songsListIndex].musicURL),myAudio.addEventListener("ended",function(){controllArm.style.transform="rotate(-130deg)","list"==playMode?(songsListIndex++,songsListIndex>=songsList.length+1&&(songsListIndex=0)):songsListIndex="shuffle"==playMode?shuffle():songsListIndex,myAudio.src=decodeURI(songsList[songsListIndex].musicURL),myAudio.load(),iStartDeg=-90,iEndDeg=-115,myAudio.play()},!1),myAudio.addEventListener("timeupdate",function(){var t=$("#myConsole");if(isNaN(myAudio.duration))t.text("error");else{var s=myAudio.currentTime/myAudio.duration;if(myAudio.paused)return;iStartDeg=-90-25*s,controllArm.style.transform="rotate("+iStartDeg+"deg)",t.text(songsList[songsListIndex%songsList.length].title+"-"+songsList[songsListIndex%songsList.length].artist)}},!1)}),Number.prototype.toPercent=function(t){return t=t||2,(Math.round(this*Math.pow(10,t+2))/Math.pow(10,t)).toFixed(t)+"%"};var songsList=[{title:"行歌",artist:"陈鸿宇",coverURL:"",musicURL:"../../data/music/123.mp3"}];